<form method="POST" action="${applicationPath}/devices/addscan?deviceId=${deviceId}">
    <table class="conf_table_style">
        <tr>
            <th><input type="checkbox" id="checkAll"></th>
            <th>Channel ID</th>
            <th>Channel Address</th>
            <th>Description</th>
            <th>Value Type</th>
        </tr>
        #foreach ( $info in $channelInfoList )
        <tr>
            #set( $channelId = "${deviceId}_$velocityCount" )
            <td><input type="checkbox" name="channels" value="$channelId"></td>
            <td><input type="input" name="${channelId}channelId" value="$channelId" size="20"></td>
            <td><input type="input" name="${channelId}address" value="$info.ChannelAddress"
                       size="30"></td>
            <td><input type="input" name="${channelId}description" value="$!info.Description"
                       size="25"></td>
            <td>
                $!info.ValueType $!info.ValueTypeLength
                <input type="hidden" name="${channelId}valueType" value="$!info.ValueType">
                <input type="hidden" name="${channelId}valueLength" value="$!info.ValueTypeLength">
            </td>
        </tr>
        #end
    </table>
    <p><input type="submit" value="Add channels"></p>
</form>


<script type="text/javascript">
    /*
     $("#addBulk").click(function() {
     var checked = $("input:checkbox:[name=channels]:checked").length;
     var posted = 0;
     console.log("adding " + checked + " channels...");
     $("input:checkbox:[name=channels]:checked").each(function() {
     var value = $(this).val();
     console.log("adding: " + value);
     $.post("${applicationPath}/channels/update?" + value, function() {
     posted++;
     });
     });

     $(document).ajaxStop(function() {
     console.log("posted " + posted + " devices");
     window.location = "${applicationPath}/channels";
     });
     });
     */
</script>
